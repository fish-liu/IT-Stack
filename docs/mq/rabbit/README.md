


RabbitMQ是采用Erlang语言实现AMQP（Advanced Message Queuing Protocol,高级消息队列协议）的消息中间件。


#### 消息队列（MQ）是什么

消息队列，即MQ，Message Queue，是一种应用程序对应用程序的通信方法。应用程序通过读取和写出队列中的消息来进行通信，而无需专用连接来链接。


消息队列是典型的：生产者、消费者模型。生产者不断向消息队列中生产消息，消费者不断的从队列中获取消息。因为消息的生产和消费都是异步的，而且只关心消息的发送和接收，没有业务逻辑的侵入，这样就实现了生产者和消费者的解耦。


#### 实现MQ的两种方式——AMQP/JMS

MQ是消息通信的模型，并发具体实现。现在实现MQ的有两种主流方式：AMQP、JMS

**两者间的区别和联系：**

- JMS是定义了统一的接口，来对消息操作进行统一；AMQP是通过规定协议来统一数据交互的格式

- JMS限定了必须使用Java语言；AMQP只是协议，不规定实现方式，因此是跨语言的。

- JMS规定了两种消息模型；而AMQP的消息模型更加丰富

常见的MQ产品：

- ActiveMQ：基于JMS

- RabbitMQ：基于AMQP协议，erlang语言（一种通用的面向并发的编程语言）开发，稳定性好

- RocketMQ：基于JMS，阿里巴巴产品，目前交由Apache基金会

- Kafka：分布式消息系统，高吞吐量



### AMQP的三层协议

![AMQP的三层协议](/images/amqp.webp)

- 1.Module Layer，位于协议最高层，主要定义了一些供客户端调用的命令，客户端可以利用这些命令实现自己的业务逻辑，例如，客户端可以通过queue.declare声明一个队列，利用consume命令获取一个队列中的消息。

- 2.Session Layer，主要负责将客户端的命令发送给服务器，在将服务器端的应答返回给客户端，主要为客户端与服务器之间通信提供可靠性、同步机制和错误处理。

- 3.Transport Layer，主要传输二进制数据流，提供帧的处理、信道复用、错误检测和数据表示。



