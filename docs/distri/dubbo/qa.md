
**问题：Dubbo中zookeeper做注册中心，如果注册中心集群都挂掉，发布者和订阅者之间还能通信吗？**

可以通信的；启动dubbo时，消费者会从zk拉取注册的生产者的地址、接口等数据，缓存在本地。每次调用时，按照本地存储的地址进行调用；注册中心的集群，任意一台宕机后，将会切换到另一台；
注册中心全部宕机后，服务的提供者和消费者仍能通过本地缓存通讯。服务提供者无状态，任一台宕机后，不影响使用；服务提供者全部宕机，服务消费者会无法使用，并无限次重连等待服务者恢复；
挂掉是不要紧的，但前提是你没有增加新的服务，如果你要调用新的服务，则是不能办到的。 

**问题：dubbo服务负载均衡策略？**

当服务提供方是集群的时候，为了避免大量请求一直落到一个或几个服务提供方机器上，从而使这些机器负载很高，甚至打死，需要做一定的负载均衡策略。Dubbo提供了多种均衡策略，缺省为random，也就是每次随机调用一台服务提供者的机器。

- 1、Random LoadBalance ：随机策略。按照概率设置权重，比较均匀，并且可以动态调节提供者的权重（权重可以在dubbo 管控台配置）。

- 2、RoundRobin LoadBalance ：轮询策略。轮询，按公约后的权重设置轮询比率。会存在执行比较慢的服务提供者堆积请求的情况，比如一个机器执行的非常慢，但是机器没有挂调用（如果挂了，那么当前机器会从Zookeeper的服务列表删除），当很多新的请求到达该机器后，由于之前的请求还没有处理完毕，会导致新的请求被堆积，久而久之，所有消费者调用这台机器上的请求都被阻塞。

- 3、LeastActive LoadBalance ： 最少活跃调用数。如果每个提供者的活跃数相同，则随机选择一个。在每个服务提供者里面维护者一个活跃数计数器，用来记录当前同时处理请求的个数，也就是并发处理任务的个数。所以如果这个值越小说明当前服务提供者处理的速度很快或者当前机器的负载比较低，所以路由选择时候就选择该活跃度最小的机器。如果一个服务提供者处理速度很慢，由于堆积，那么同时处理的请求就比较多，也就是活跃调用数目越大，这也使得慢的提供者收到更少请求，因为越慢的提供者的活跃度越来越大。

- 4、ConsistentHash LoadBalance ： 一致性Hash策略。一致性Hash，可以保证相同参数的请求总是发到同一提供者，当某一台提供者挂了时，原本发往该提供者的请求，基于虚拟节点，平摊到其他提供者，不会引起剧烈变动。


**问题：Dubbo的集群容错策略？**

正常情况下，当我们进行系统设计时候，不仅要考虑正常逻辑下代码该如何走，还要考虑异常情况下代码逻辑应该怎么走。当服务消费方调用服务提供方的服务出现错误时候，Dubbo提供了多种容错方案，缺省模式为failover，也就是失败重试。

Dubbo提供的集群容错模式：

- 1、Failover Cluster：失败重试。当服务消费方调用服务提供者失败后自动切换到其他服务提供者服务器进行重试。这通常用于读操作或者具有幂等的写操作，需要注意的是重试会带来更长延迟。可通过 retries="2" 来设置重试次数（不含第一次）。

- 2、Failfast Cluster：快速失败。 当服务消费方调用服务提供者失败后，立即报错，也就是只调用一次。通常这种模式用于非幂等性的写操作。

- 3、Failsafe Cluster：失败安全。 当服务消费者调用服务出现异常时，直接忽略异常。这种模式通常用于写入审计日志等操作。

- 4、Failback Cluster：失败自动恢复。 当服务消费端用服务出现异常后，在后台记录失败的请求，并按照一定的策略后期再进行重试。这种模式通常用于消息通知操作。

- 5、Forking Cluster：并行调用 。当消费方调用一个接口方法后，Dubbo Client会并行调用多个服务提供者的服务，只要一个成功即返回。这种模式通常用于实时性要求较高的读操作，但需要浪费更多服务资源。可通过 forks="2" 来设置最大并行数。

- 6、Broadcast Cluster：广播调用 。当消费者调用一个接口方法后，Dubbo Client会逐个调用所有服务提供者，任意一台调用异常则这次调用就标志失败。这种模式通常用于通知所有提供者更新缓存或日志等本地资源信息。


**问题：Dubbo在安全机制方面是如何解决的？**

Dubbo 通过Token令牌防止用户绕过注册中心直连，然后在注册中心上管理授权。Dubbo还提供服务黑白名单，来控制服务所允许的调用方。


**问题：Dubbo连接注册中心和直连的区别？**



**问题：Dubbo支持的协议？**

dubbo协议、RMI协议、Hessian协议、http协议、webservice协议、Thrif 协议

**问题：dubbo 协议的理解？**



**问题：**

**问题：**

**问题：**

**问题：**

**问题：**

**问题：**

**问题：**

**问题：**

**问题：**
